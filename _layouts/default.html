<!DOCTYPE html>
<html>
	{% include head.html %}

	{% assign pp = site.pages %}
	{% assign nextpart = page.part | plus: 1 %}
	{% assign previouspart = page.part | minus: 1 %}
	{% assign urlparts = page.url | split: '/' %}
	{% assign urlcount = urlparts.count | plus: -2  %}
	{% assign parent = urlparts[urlcount]  %}
	{% assign printed = false %}

	<body>
		<script>
		(function() {
			// Check if iframe
			if(window.top !== window){
				document.body.classList.add('in-iframe');
				// Remove/add CSS includes
				var e = document.getElementsByTagName('link');
				for(var i=e.length-1; i>=0; i--){
					if(e[i].dataset.removeInCreate){
						document.head.removeChild(e[i]);
					}
					if(e[i].dataset.addInCreate){
						e[i].href = e[i].dataset.href;
					}
				}
			}

			// Redirect if on github
			{% if site.redirectFromHost %}
				if(location.host == '{{ site.redirectFromHost }}'){
					location.href = "{{ site.url }}".replace(/\/$/,'') + location.pathname.replace('{{ site.redirectFromPath }}', '{{ site.redirectToPath }}');
				}
			{% endif %}

			// Redirects
			if(location.pathname == '/courses/'){
				location.href = location.href.replace('/courses/', '#courses');
			}
			if(location.pathname == '/tutorials/'){
				location.href = location.href.replace('/tutorials/', '#tutorials');
			}

		})();
		</script>

		{% include header.html %}
		<div class="jumbotron">
			<div class="container">
				<h1>
					{% if page.part %}
						<span class="titlepart">Part {{ page.part }}: </span>
					{% endif %}
					{{ page.title }}
				</h1>
				{% if page.subtitle %}<p>{{ page.subtitle }}</p>{% endif %}

				{% if page.difficulty_overall %}
				<p>
				{% case page.difficulty_overall %}
				{% when 0 %}
					Beginner Tutorial
				{% when 1 %}
					Intermediate Tutorial
				{% when 2 %}
					Expert Tutorial
				{% else %}
				{% endcase %}
				</p>
				{% endif %}

				{% if page.url == "/" %}
					{% include searchbar.html %}
				{% endif %}
			</div>
		</div>
		<div class="create-course-info">
			<div class="learncreate-header">
				<span class="learnlogo"></span><span class="title">Goo Learn</span>
			</div>
			<div class="infocontainer">
				<div class="info-title">
					<span class="collapseicon icon-arrow-right"></span>
					{{ page.title }}{% if page.part %} - Part {{ page.part }}{% endif %}
				</div>
				<div class="info-content {% if page.layout == "courseoverview" or page.layout == "tutorial" %}expanded{% endif %}">
					<div class="course {% if page.layout == "tutorial" %}hidden{% endif %}">
						<p>
							Your progress
						</p>
						<div class="progressbarcontainer" data-tutorials="
						{% assign pp = site.pages %}{% for ppage in pp %}{% if ppage.layout == "coursepart" and ppage.url contains parent %}{{ ppage.url }} {% endif %}{% endfor %}
						">
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<p>
								Tags
							</p>
							{% assign words = page.tags | split: ", " %}
							{% for word in words  %}
							<div class="tag">{{ word }}</div>
							{% endfor %}
						</div>
					</div>
					<div class="row">
						<div class="col-md-12">
							<p>
								In this {% if page.layout == "courseoverview" %}course{% elsif page.layout == "coursepart" %}part{% elsif page.layout == "tutorial" %}tutorial{% endif %} you will learn about:
							</p>
							{% assign words = page.achievements | split: ", " %}
							{% for word in words  %}
							<span class="goofont goofont-icon-checked"></span><span class="achievement">{{ word }}</span><br />
							{% endfor %}
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="container">

			<div class="row">
				{{ content }}
			</div>
			{% include footer.html %}
		</div>

		<script src="{{ '/js/jquery.min.js' | prepend: site.baseurl }}"></script>
		<script src="{{ '/js/bootstrap.min.js' | prepend: site.baseurl }}"></script>
		<script src="{{ '/js/progressbar.min.js' | prepend: site.baseurl }}"></script>
		<script src="{{ '/js/courseprogress.js' | prepend: site.baseurl }}"></script>
		<script src="{{ '/js/filterbarhandler.js' | prepend: site.baseurl }}"></script>

		<script type="text/javascript">

			// Off canvas
			$(document).ready(function () {
				$('[data-toggle="offcanvas"]').click(function () {
					$('.row-offcanvas').toggleClass('active')
				});
				$('.info-content').hide();
				$('.infocontainer').click(function(){
					$('.info-content').slideToggle();
					$('.collapseicon').toggleClass('icon-arrow-right icon-arrow-down')
				});

			});

			// Header anchor links
			$(function() {
				return $("h2, h3, h4, h5, h6").each(function(i, el) {
					var $el, icon, id;
					$el = $(el) ;
					id = $el.attr('id');
					icon = '<i class="fa fa-link"></i>';
					if (id) {
						return $el.prepend($(" <a />").addClass("header-link").attr("href", "#" + id).html(icon));
					}
				});
			});

			// Set resume/done status
			$(document).ready(function () {
				{% if page.difficulty_overall or page.part %}
					setResumeURL('{{ page.url }}');
				{% endif %}
				{% if page.part %}
					setTutorialDoneStatus('{{ page.url }}');
				{% endif %}
			});
		</script>

		<script type="text/javascript">
			(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
			(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
			m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
			})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
			ga('create', 'UA-55739361-8', 'auto');
			ga('send', 'pageview');
		</script>
	</body>
</html>
